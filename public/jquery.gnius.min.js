/*!
 * gNius JavaScript Library b20100804163990401
 * http://phiveleven.com/gnius
 *
 * Copyright (c) 2009 phiveleven
 * Dual licensed under the MIT and GPL licenses.
 * http://phiveleven.com/gnius/License
 *
 */
var gNius=function(e){e.fn.extend({interpolate:function(n,r){var i=e();this.each(function(r,s){var o=t.interpolate(s,n||window);if(o.length>1)e(s).replaceWith(o);jQuery.merge(i,o)});if(!r)return i;if("function"==typeof r)return this.each(r);if("object"==typeof r)return e.each(r,function(e,t){this.each(t)})}});var t={interpolate:function(n,r){if(typeof n=="string")n=e("<div>").html(n);if(n.tagName)n=e(n);var i;if(i=n.attr("data")){r=t.dereference.call(r,i)}if(r instanceof Array){n.removeAttr("data");var s=e();for(var o=0,u=r.length;o<u;o++){r[o]._i=o;var a=t.interpolate(n.clone(true),r[o]).insertBefore(n);jQuery.merge(s,a)}n.remove();return s}var f=[];n.find("[data]:not([data-gNtpl])").filter(function(t){return!e(this).parents("[data]").size()}).html(function(t,n){e(this).attr("data-gNtpl",f.push(n)-1);return""});n.html(function(e,n){return n.replace(/\$([a-zA-Z_\$][a-zA-Z_\$\d\.]*)/g,function(e,n){return t.dereference.call(r,n)||""})}).removeAttr("data");n.find("[data-gNtpl]").each(function(n,s){s=e(s);s.html(f[s.attr("data-gNtpl")]);s.removeAttr("data-gNtpl");i=s.attr("data");s.removeAttr("data");if(!i.match(/^\//))r=window;t.interpolate(s,t.dereference.call(r,i))});return n},dereference:function(e){if(e instanceof Array){var n=this;for(var r=0,n;n;r++){if(typeof e[r]!="string")break;n=t.dereference.call(n,e[r])}return n}e=e.replace(/^\//,"");if(this[e])return this[e];if(e.match("/")){return t.tree.call(this,e)}var i=/\[(["|']).+?\1\]/,s=/\[[\d+]\]/,o=/[a-zA-Z_$][a-zA-Z_$\d]*/,u=new RegExp([i.source,s.source,o.source].join("|"),"g"),a=e.match(u),f=a[0],l=f.replace(/^\[['|"]?(.+?)['|"]?\]$/,"$1");if(a.length==1)return this[l];if(typeof this[l]=="undefined")this[l]=(new RegExp(s)).test(f)?[]:{};return t.dereference.call(this[l],e.replace(f,""))},tree:function(n){n=n.replace(/^\//,"").replace(/\/$/,"");if(n.match("/")){var r=n.split("/").concat([].slice.call(arguments,1));var i=t.tree.apply(this,r);return t.dereference.call(i,r)}if(arguments.length==1)this[n]=t.dereference.call(this,n);else{var s=typeof arguments[1]=="function"?arguments[1].call(this,n):t.tree.apply(this[n]||{},[].slice.call(arguments,1));if(s instanceof Array)this[n]=s;else this[n]=e.extend(true,this[n]||{},s)}return this}};return t}(jQuery)